#!/bin/bash

AGENT47_HOME="$HOME/.agent47"
TEMPLATES_DIR="$AGENT47_HOME/templates/prompts"

PROMPTS_DIR="prompts"
TARGET_FILE="$PROMPTS_DIR/agent-prompt-sdd.txt"

echo "[INFO] Initializing spec + skills prompt (SDD)..."

if [ ! -d "$PROMPTS_DIR" ]; then
  mkdir "$PROMPTS_DIR"
  echo "[OK] Created directory: $PROMPTS_DIR/"
fi

if [ -f "$TARGET_FILE" ]; then
  echo "[WARN] $TARGET_FILE already exists, skipping"
  exit 0
fi

if [ -f "$TEMPLATES_DIR/agent-prompt-sdd.txt" ]; then
  cp "$TEMPLATES_DIR/agent-prompt-sdd.txt" "$TARGET_FILE"
  echo "[OK] Created prompt: $TARGET_FILE"
else
  echo "[ERR] Template not found: agent-prompt-sdd.txt"
fi

echo "[OK] Spec + skills prompt setup complete."
